@import nib

// Mixins

pie-clearfix()
    &:before, &:after
        content " "
        display table

    &:after
        clear both

    *zoom 1

// Stuff

$green = rgb(108, 199, 123)

microphone-icon($color)
    width 100%
    height 100%
    text-align center
    position absolute

    *
        position absolute
        left 50%

    .cardioid
        border-radius 10px
        width 20px
        margin-left -10px
        top 14px
        bottom 39px
        background $color

    .stand
        overflow hidden
        bottom 22px
        height 40px
        width 100%
        left 0%

        .stand-inner
            border-radius 30px
            border 5px solid $color
            margin-left -19px
            height 40px
            width 28px
            bottom 8px

    .stand-base-vertical
        background $color
        height 17px
        width 7px
        margin-left -4px
        bottom 14px

    .stand-base-horizontal
        background $color
        width 30px
        height 5px
        bottom 14px
        margin-left -15px

@-webkit-keyframes stripe-anim
    from
        -webkit-transform translate(-32px, 0)
    to
        -webkit-transform none

.permissions-bar
    -webkit-transition opacity 0.6s, top 0.6s
    opacity 0
    position fixed
    top -20px
    left 0
    width 100%
    height 14px
    background #eee
    overflow hidden
    border-bottom 1px solid #aaa

    &.show
        opacity 1
        top 0

    .stripe
        opacity 0.1
        background url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAAQ0lEQVR42uXNoQ0AIBTEUPZf4o96nKsiCEQFTZ7uupXkqE3lwfw9T+LOy52XNIc0hzSHNYc0hzSHNIc0hzSHNIc0xwb6PzfnUz+PRwAAAABJRU5ErkJggg==")
        position absolute
        left 0
        right -32px
        height 14px
        -webkit-animation stripe-anim .5s infinite linear

.speach-button
    -webkit transition opacity 0.4s
    box-shadow 0 1px #ccc, 0 2px #ccc
    border-radius 50%
    position fixed
    z-index 100
    cursor pointer
    -webkit-appearance none
    border 1px solid #444
    width 100px
    height 100px
    border 0
    background #eee
    left 50%
    margin-left -50px
    top 50%
    margin-top -50px

    &:active
        box-shadow inset 0 2px 5px rgba(0, 0, 0, 0.4)

        .microphone-icon
            microphone-icon(#aaa)

    .microphone-icon
        microphone-icon(#ccc)

    &.listening

        .microphone-icon
            microphone-icon($green)

        .microphone-icon-shadow
            microphone-icon(darken($green, 20%))
            opacity 0.7

    &.disabled
        -webkit-filter blur(2px)
        cursor default
        opacity 0.6

        &:active
            box-shadow 0 1px #ccc, 0 2px #ccc

            .microphone-icon
                microphone-icon(#ccc)

    &.hidden
        display block
        opacity 0

        &.mousemove
            opacity 0.6

.microphone-icon
    microphone-icon(#ccc)

.microphone-icon-shadow
    microphone-icon(#000)
    top -1px
    opacity 0.22

.app-window
    z-index 10
    position fixed
    top 0
    left 0
    width 100%
    height 100%

.video-container
    position relative
    height 100%
    width 100%

    iframe, object, embed
        position absolute
        top 0
        left 0
        width 100%
        height 100%

// Messenger Air theme tweaks

body

    ul.messenger-theme-air
        font-family "Helvetica Neue", Helvetica, Arial, sans-serif

        .messenger-message-slot
            text-align center

            .messenger-message
                box-shadow none
                font-size 36px
                font-weight 100
                letter-spacing 1px
                color #888
                display inline-block
                padding 15px 26px 14px

                .messenger-spinner, .messenger-message-inner:before
                    display none

    ul.messenger.messenger-fixed.messenger-on-top
        top 50%
        margin-top 70px

// Dark theme

html.dark
    background #000

    .permissions-bar
        background $green
        border-bottom-color #222

        .stripe
            opacity 1

    .speach-button
        box-shadow 0 0 0 4px #c6c6c6, 0 1px 0 4px #000, inset 0 1px 0 0px #000
        background rgba(0, 0, 0, 0.5)

        .microphone-icon-shadow
            top 1px
            opacity 0.7

        .microphone-icon
            microphone-icon(#c6c6c6)

        &:hover
            box-shadow 0 0 0 4px #eee, 0 1px 0 4px #000, inset 0 1px 0 0px #000

            .microphone-icon
                microphone-icon(#eee)

        &:active, &.disabled
            box-shadow 0 0 0 4px #bbb, 0 1px 0 4px #000, inset 0 1px 0 0px #000

            .microphone-icon
                microphone-icon(#bbb)

        &.listening
            box-shadow 0 0 0 4px $green, 0 1px 0 4px #000, inset 0 1px 0 0px #000

            .microphone-icon
                microphone-icon($green)

    ul.messenger-theme-air

        .messenger-message
            box-shadow 0 1px 3px rgba(0, 0, 0, 0.3)
            color #ccc
            background rgba(0, 0, 0, 0.5)
            text-shadow 0 1px #000

// Weather app

.weather-window
    background rgb(43, 129, 159)

    *
        font-family "Helvetica Neue", Helvetica, Arial, sans-serif
        text-shadow 0 1px rgba(0, 0, 0, 0.6)

    .weather-container
        position relative
        overflow hidden
        height 100%
        width 100%

        &.error
            text-align center
            font-size 20px

        &.loaded

            .days-container
                display block

        &.first a.previous, &.last a.next
            display none

        .days-container
            display none
            position absolute
            list-style none
            width 100%
            height 100%
            margin 0
            padding 0
            white-space nowrap
            left 0
            text-align center
            position absolute
            top 50%
            margin-top -280px

            li
                position relative
                display inline-block
                text-align center

                img
                    display block
                    margin 35px auto 0

                .day
                    color #dcf0f6
                    font-size 15px
                    padding-top 20px

                    b
                        font-weight normal
                        color rgb(162, 219, 236)

                .cond
                    bottom -52px
                    color #dcf0f6
                    font-size 24px
                    position absolute
                    width 100%

                    b
                        text-transform uppercase

        .location
            font-weight 400
            font-size 28px
            color rgb(255, 255, 255)
            margin-top 200px
            position absolute
            top 50%
            width 100%
            text-align center

            b
                font-weight bold